<nav class="navbar navbar-expand-lg navbar-dark" style="background-color:#0d6efd;">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">Lab Instruments</a>

    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">

        <li class="nav-item" id="navInstrumentos">
          <a class="nav-link" href="instrumentos.html">Instrumentos</a>
        </li>

        <li class="nav-item" id="navBusqueda">
          <a class="nav-link" href="busqueda.html">Búsqueda</a>
        </li>

        <li class="nav-item" id="navPrestamos">
          <a class="nav-link" href="prestamos.html">Préstamos</a>
        </li>

        <li class="nav-item" id="navUsuarios">
          <a class="nav-link" href="usuarios.html">Usuarios</a>
        </li>

        <li class="nav-item" id="navExcel">
          <a class="nav-link" href="excel.html">Excel (Import/Export)</a>
        </li>

      </ul>

      <span id="userInfo" class="navbar-text text-white me-3"></span>
      <button id="logoutBtn" class="btn btn-light btn-sm">Salir</button>
    </div>
  </div>
</nav>


<script>
  const user = JSON.parse(localStorage.getItem('usuario'));

  if (!user) {
    window.location.href = 'login.html';
  }

  document.getElementById('userInfo').textContent = `${user.nombre} (${user.rol})`;

  // Ocultar opciones según rol
  if (user.rol === 'ASISTENTE') {
    document.getElementById('navUsuarios').style.display = 'none'; // no puede administrar usuarios
  }

  if (user.rol === 'AUDITOR') {
    document.getElementById('navPrestamos').style.display = 'none';
    document.getElementById('navUsuarios').style.display = 'none';
    document.getElementById('navExcel').style.display = 'none';
  }

  // Logout
  document.getElementById('logoutBtn').onclick = () => {
    localStorage.clear();
    fetch('/api/auth/logout', { method: 'POST' });
    window.location.href = 'login.html';
  };
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>