
  <!-- Estilo local opcional -->
  <link rel="stylesheet" href="style.css">
  

<nav class="navbar navbar-expand-lg navbar-dark" style="background-color:#0d6efd;">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">Lab Instruments</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

      <ul class="navbar-nav me-auto">

        <li class="nav-item" id="navInstrumentos">
          <a class="nav-link" href="instrumentos.html">Instrumentos</a>
        </li>

        <li class="nav-item" id="navBusqueda">
          <a class="nav-link" href="busqueda.html">Búsqueda</a>
        </li>

        <li class="nav-item" id="navPrestamos">
          <a class="nav-link" href="prestamos.html">Préstamos</a>
        </li>

        <li class="nav-item" id="navUsuarios">
          <a class="nav-link" href="usuarios.html">Usuarios</a>
        </li>

      
        <li class="nav-item" id="navUsuarios">
         <button id="logoutBtn" class="btn btn-sm" style="background-color:#FFE2DF; border:none; width:30%">
          <a href="/logout" style="text-decoration:none; color:#4B3832; font-weight:600;">
            Salir
          </a>
        </button>
        </li>

      </ul>

     


    </div>
  </div>
</nav>

<script>
/* ==========================
   VALIDAR SESIÓN
========================== */
const userData = localStorage.getItem('usuario');

if (!userData) {
  window.location.href = 'login.html';
}

const user = JSON.parse(userData);

// Mostrar nombre y rol
document.getElementById('userInfo').textContent = `${user.nombre} (${user.rol})`;

/* ==========================
   CONTROL DE ROLES
========================== */

// ASISTENTE → NO puede ver Usuarios / Excel
if (user.rol === 'ASISTENTE') {
  document.getElementById('navUsuarios')?.classList.add("d-none");
  document.getElementById('navExcel')?.classList.add("d-none");
}

// AUDITOR → apenas puede consultar
if (user.rol === 'AUDITOR') {
  document.getElementById('navPrestamos')?.classList.add("d-none");
  document.getElementById('navUsuarios')?.classList.add("d-none");
  document.getElementById('navExcel')?.classList.add("d-none");
}

/* ==========================
   LOGOUT
========================== */
document.getElementById('logoutBtn').onclick = () => {
  localStorage.clear();
  fetch('/api/auth/logout', { method: 'POST' });
  window.location.href = 'login.html';
};
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
